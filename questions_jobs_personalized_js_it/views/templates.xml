<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="website_hr_recruitment.apply">
        <t t-call="website.layout">
        <t t-set="additional_title">Apply Job</t>

        <div id="wrap"  class="container">
            <h1 class="text-center mt-2">
                Job Application Form
            </h1>
            <h2 t-if="job" class="text-center text-muted">
                <span t-field="job.name"/>
            </h2>

            <div class="row mt-3">
                <section id="forms" class="col">
                    <span class="hidden" data-for="hr_recruitment_form" t-att-data-values="{'department_id': job and job.department_id.id or '', 'job_id': job and job.id or ''}" />
                    <form id="hr_recruitment_form" action="/website_form_questions_hr/"
                          method="post" class="s_website_form" enctype="multipart/form-data"
                          data-model_name="hr.applicant" data-success_page="/job-thank-you" hide-change-model="true">
                        <div class="form-group row form-field o_website_form_required_custom">
                            <div class="col-lg-3 col-md-4 text-right">
                                <label class="col-form-label" for="partner_name">Your Name</label>
                            </div>
                            <div class="col-lg-7 col-md-8">
                                <input type="text" class="form-control o_website_form_input" name="partner_name" required=""/>
                            </div>
                        </div>
                        <!--
                        <div class="form-group row form-field o_website_form_required_custom">
                            <div class="col-lg-3 col-md-4 text-right">
                                <label class="col-form-label" for="email_from">Your Email</label>
                            </div>
                            <div class="col-lg-7 col-md-8">
                                <input type="email" class="form-control o_website_form_input" name="email_from" required=""/>
                            </div>
                        </div>
                        <div class="form-group row form-field o_website_form_required_custom">
                            <div class="col-lg-3 col-md-4 text-right">
                                <label class="col-form-label" for="partner_phone">Your Phone Number</label>
                            </div>
                            <div class="col-lg-7 col-md-8">
                                <input type="text" class="form-control o_website_form_input" name="partner_phone" required=""/>
                            </div>
                        </div>
                        <div class="form-group row form-field">
                            <div class="col-lg-3 col-md-4 text-right">
                                <label class="col-form-label" for="description">Short Introduction</label>
                            </div>
                            <div class="col-lg-7 col-md-8">
                                <textarea class="form-control o_website_form_input" name="description"></textarea>
                            </div>
                        </div>
                        <div class="form-group row form-field o_website_form_custom">
                          <div class="col-lg-3 col-md-4 text-right">
                            <label class="col-form-label" for="Resume">Resume</label>
                          </div>
                          <div class="col-lg-7 col-md-8">
                            <input type="file" class="form-control o_website_form_input" name="Resume"/>
                          </div>
                        </div>
                        <div class="form-group row form-field d-none">
                            <div class="col-lg-3 col-md-4">
                                <label class="col-form-label" for="job_id">Job</label>
                            </div>
                            <div class="col-lg-7 col-md-8">
                                <input type="hidden" class="form-control o_website_form_input" name="job_id"/>
                            </div>
                        </div>
                        <div class="form-group row form-field d-none">
                            <div class="col-lg-3 col-md-4">
                                <label class="col-form-label" for="department_id">Department</label>
                            </div>
                            <div class="col-lg-7 col-md-8">
                                <input type="hidden" class="form-control o_website_form_input" name="department_id"/>
                            </div>
                        </div>

                        -->

                        <input type="hidden" t-att-value="'%s' %(job.id)"  name="job_id"/>
                        <input type="hidden"  t-att-value="'%s' %(job.department_id.id)" name="department_id" />

                        <t t-foreach="job.questions_test" t-as="p" >
                              <div class="form-group row form-field o_website_form_required_custom" t.if="p.field_type" >
                                 <div class="col-lg-3 col-md-4 text-right">
                                    <label class="col-form-label"
                                           t-att-for="'%s' %(p.field_id.name)"
                                    >
                                        <t t-esc="p.name" />

                                    </label>
                                 </div>
                                 <div class="col-lg-7 col-md-8"  t-if="not p.ttype == 'boolean' "  >
                                    <input type="text" class="form-control o_website_form_input"
                                           t-att-name="'%s' %(p.field_id.name)" required=""  t-if="p.ttype == 'char' and not  p.is_email" />

                                    <input type="email" class="form-control o_website_form_input"
                                           t-att-name="'%s' %(p.field_id.name)" required=""  t-if="p.ttype == 'char' and p.is_email" />

                                    <input type="date" class="form-control o_website_form_input"
                                           t-att-name="'%s' %(p.field_id.name)" required=""  t-if="p.ttype == 'date' " />

                                    <textarea class="form-control o_website_form_input" required=""
                                              t-att-name="'%s' %(p.field_id.name)"  t-if="p.ttype ==  'text' " />

                                    <input type="file" class="form-control o_website_form_input"
                                           t-att-name="'%s' %(p.field_id.name)"
                                           t-if="p.ttype ==  'binary' "
                                          />


                                     <select t-att-name="'%s' %(p.field_id.name)" class="form-control o_website_form_input"
                                             required=""  t-if="p.ttype == 'selection' " >
                                         <t t-foreach="p.field_id.selection_ids" t-as="s" >
                                             <option t-att-value="'%s' %(s.value)" ><t t-esc="s.name" /></option>
                                         </t>

                                     </select>


                                 </div>
                                 <div class="col-lg-1 col-md-1"  t-if="p.ttype == 'boolean' "  >
                                     <input type="checkbox" class="form-control o_website_form_input"
                                           t-att-name="'%s' %(p.field_id.name)"   t-if="p.ttype == 'boolean' " />

                                 </div>
                              </div>
                        </t>


                        <div class="form-group row">
                            <div class="offset-lg-3 offset-md-4 col-md-8 col-lg-7">
                                <button  type="submit" id="ccpe" class="btn btn-primary btn-lg ">Enviar</button>
                                <span id="o_website_form_result"></span>
                            </div>
                        </div>
                    </form>
                </section>
            </div>
        </div>
    </t>
    </template>


    <record id="thankyou" model="website.page">
    <field name="url">/job-thank-you-js</field>
    <field name="is_published">True</field>
    <field name="website_indexed" eval="False"/>
    <field name="name">Gracias (Por Postular)</field>
    <field name="type">qweb</field>
    <field name="key">questions_jobs_personalized_js_it.thankyou</field>
    <field name="arch" type="xml">
        <t name="Thank you (Recruitment)" t-name="questions_jobs_personalized_js_it.thankyou">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-12">
                                    <h1 class="text-center">Felicitaciones!</h1>
                                    <p class="text-center">
                                        Has postulado Correctamente.
                                    </p>
                                </div>
                                <!--
                                <t t-if="request.session.get('form_builder_model_model', '') == 'hr.applicant'">
                                    <t t-set="job" t-value="request.website._website_form_last_record().sudo().job_id"/>
                                    <t t-set="responsible" t-value="job and job.user_id.website_published and job.user_id "/>
                                </t>
                                -->
                                <!--
                                <t t-if="responsible">
                                    <div class="col-lg-12">
                                        <h3 class="mb32 text-center">Your application has been sent to:</h3>
                                    </div>
                                    <div class="col-lg-1 offset-lg-4">
                                        <p t-field="responsible.image_128" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded-circle d-block mx-auto o_image_64_cover'}"/>
                                    </div>
                                    <div class="col-lg-5 o_responsible_data">
                                        <h4 class="mt0" t-field="responsible.name"/>
                                        <p t-field="responsible.function"/>
                                        <t t-if='responsible.email'>
                                            <i class="fa fa-envelope" role="img" aria-label="Email" title="Email"></i> <a t-attf-href="mailto:#{responsible.email}" t-esc="responsible.email"/>
                                        </t>
                                        <t t-if='responsible.phone'>
                                            <br/><i class="fa fa-phone" role="img" aria-label="Phone" title="Phone"></i> <span t-field="responsible.phone"/>
                                        </t>
                                    </div>
                                    <div class="col-lg-12 mt32 text-center">
                                        <span>
                                            We usually reply between one and three days.<br/>
                                            Feel free to contact him/her if you have further questions.
                                        </span>
                                    </div>
                                </t>
                                -->
                            </div>
                            <div class="row" id="o_recruitment_thank_cta">
                                <div class="col-lg-12 text-center mt32 mb32">
                                    Mientras tanto
                                    <h3 class="mt8 mb32">Mira nuestra Pagina Web:</h3>
                                    <a role="button" href="/" class="btn btn-primary btn-lg">Visita Nuestro Sitio Web</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </field>
</record>

</odoo>